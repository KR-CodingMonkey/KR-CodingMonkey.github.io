
# WireShark

<center><img src = "https://user-images.githubusercontent.com/76420201/105180489-fd0d4400-5b6d-11eb-958b-0ba9c22e78da.png" width = "90%"></center>

<br/>
와이어샤크(Wireshark)는 자유 및 오픈 소스 패킷 분석 프로그램이다. 강력하고 쉬운 사용법때문에 해킹뿐만 아니라 보안 취약점 분석, 보안 컨설팅, 개인정보 영향평가 등 여러 분야에서 폭 넓게 사용된다.

- 실시간 네트워크 연결의 유선으로부터 데이터를 포획하고, 이미 포획한 패킷을 기록해둔 파일로부터 데이터를 읽을 수 있다.
- 실시간 데이터를 이더넷, IEEE 802.11, PPP, 루프백을 포함한 수많은 네트워크로부터 읽을 수 있다.
- 포획한 네트워크 데이터는 GUI나 터미널 (명령 줄) 버전의 유틸리티 TShark를 통해 탐색할 수 있다.
- 포획한 파일들은 editcap 프로그램으로의 명령 줄 스위치를 통하여 프로그래밍하듯이 편집하거나 변환할 수 있다.
- 데이터 표현은 디스플레이 필터를 이용하여 정리할 수 있다.
- 새로운 프로토콜 분석을 위해 플러그인을 만들 수 있다.
- 포획한 트래픽 내의 VoIP 호출을 감지할 수 있다. 호환되는 인코딩으로 부호화되면 미디어 플로도 재생할 수 있다.
- 와이어샤크를 통해 순수 USB 트래픽을 포획할 수 있다. 이 기능은 현재 리눅스에서만 이용할 수 있다.

{:.text-red}
Wireshark는 자체 프로그램으로 네트워크 트래픽을 캡처하는 것이 아니고, 운영체제에서 지원하는 캡처 라이브러리를 이용하여 수집한다.

유닉스 : libpcap<br/>
윈도우 : Winpcap


## 인터페이스

인터페이스는 총 4부분으로 나누어져 있음


![와이어샤크 인터페이스](https://user-images.githubusercontent.com/76420201/105182684-ad7c4780-5b70-11eb-9aac-9562a52dfd29.jpg)


- 1번은 메뉴들을 나타내며 ( File, Edit, View, Go, Capture, Analyze, Statistics, Help ) 총 8개의 메뉴로 구성되어 있습니다. 

    - [File]       : 캡쳐 데이터를 열거나 저장
    - [Edit]       : 패킷을 찾거나 표시합니다. 프로그램의 속성 설정 (예를들어, ssl 패킷을 보기위한 개인키 등록 등)
    - [View]      : wireshark 플랫폼의 보이는 모양 설정
    - [Go]        : 캡쳐된 데이터를 특정 위치로 이동
    - [Capture]  : 캡쳐 필터 옵션을 설정하고 캡쳐 시작
    - [Analyze]  : 분석 옵션 설정
    - [Statistics] : wireshark 통계 데이터 확인
    - [Help]       : 도움말 보기


- 2번은 출발지와 목적지를 기준으로 오고가는 패킷들을 시간순서대로 리스트 형식으로 나열해 놓은 것을 확인할 수 있습니다.

- 3번은 2번 출력창에서 선택한 하나의 단일 패킷에 대하여 세부내용을 정리해서 보여주는 상세 정보창입니다. 이 창을 통하여 각 계층에서 어떤 프로토콜을 사용하였는지, 출발지/목적지의 맥 주소 등의 정보를 알 수 있습니다. (프로토콜의 필드값에 대하여 자세하게 확인이 가능)

                                    |-|-|
                                    |No. | 패킷을 수집한 순서|
                                    |Time | 패킷이 수집된 시간|
                                    |Source | 패킷을 보낸 주소|
                                    |Destination | 패킷 도착 주소|
                                    |Protocol | 프로토콜 정보|
                                    |Length | 패킷의 길이|
                                    |Info | 패킷 정보|

- 4번은 2번 출력창에서 선택한 하나의 단일 패킷에 대하여 패킷 데이터를 16진수와 ASCII 코드로 보여줍니다. 

[출처](https://itsaessak.tistory.com/162)

<br/>

## 필터

두 가지의 필터링 방식 (중요하진 않음)

- Capture filter : 애초에 패킷 수집 자체에 필터를 걸어서 필터링에 적용된 패킷만 받는 방법(성능에 영향을 끼칠 수 있음..)
- Display filter : 오가는 패킷 전체를 수집한 후, 내가 화면에서 볼 것만 필터링하는 방법(권장, 다양한 연산이 사용가능함)

메뉴 - Capture -> 로그에 기록되는 데이터를 선택하기 위해 사용 (캡쳐가 시작되기 전에 정의)<br/>
메뉴 - Display -> 캡쳐된 로그에서 데이터를 찾을 때 사용 (데이터가 캡쳐되는 동안/후에 수정 가능) 
 

데이터를 찾을때 자주 사용하는 옵션 값

![wireshark_option](https://user-images.githubusercontent.com/76420201/105183945-2039f280-5b72-11eb-9b39-c06d61855a8f.png)
 

 논리/비교 연산자

 ![wireshark_option2](https://user-images.githubusercontent.com/76420201/105183948-20d28900-5b72-11eb-9562-eabcd7098f4c.png)
