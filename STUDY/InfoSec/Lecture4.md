
# 패킷 분석

WireShark를 통한 패킷 분석 방법을 알아본다.

## TCP

[1] wireshark에서 패킷 캡쳐링을 실시 한 후, 화면에서 Protocol 영역 중에 TCP를 찾아서 클릭하면 TCP에 관한 정보가 나오게 됩니다.


[2]

-(Src Port)Source port (발신지 포트 필드) : 발신지 포트필드는 발신지에서 오픈된 포트입니다. 위의 패킷을 보면 https 포트 (443) 인 것을 확인할 수 있습니다.

-(Dst Port)Destination port (목적지 포트 필드) : 목적지 포트필드는 수신지에서 오픈된 포트입니다. 위의 패킷을 보면 51462 포트인 것을 확인할 수 있습니다.

-(Seq)Sequence number (순차 번호 필드) : 순차번호필드는 고유한 번호를 가지며, 이 값으로 TCP 세그먼트에 대한 식별값을 제공하며, 통신 스트림일부가 분실되면 확인을 위해 수신자를 사용가능하게 합니다. 이 순차번호는 패킷에 포함되있는 데이터 만큼 증가하게 됩니다. 화면에서는 15631의 값을 가집니다.

-(Ack)Acknowledgment number (확인 응답 번호 필드) : 확인 응답 번호 필드는 다음번에 기대되는 순차번호를 표시한다. ack number에 관련하여 1078의 값을 가지게 됩니다.

-Header length (데이터 오프셋 필드) : 데이터 오프셋필드는 TCP헤더의 길이를 정의합니다. 길이는 4byte씩 증가되고, 이 필드의 값이 20이면 80바이트 길이를 갖는다는 것입니다. TCP헤더의 길이가 다양하게 변화시킬 필요가 있으므로 이 필드가 필요하게 됩니다.

출처: https://jwprogramming.tistory.com/84 [개발자를 꿈꾸는 프로그래머]

## UDP

## ICMP

## DNS


<!-- ## ARP Poison 분석 방법 

ARP 스푸핑(ARP spoofing)은 근거리 통신망(LAN) 하에서 주소 결정 프로토콜(ARP) 메시지를 이용하여 상대방의 데이터 패킷을 중간에서 가로채는 중간자 공격 기법이다. 이 공격은 데이터 링크 상의 프로토콜인 ARP 프로토콜을 이용하기 때문에 근거리상의 통신에서만 사용할 수 있는 공격이다.

이 기법을 사용한 공격의 경우 특별한 이상 증상이 쉽게 나타나지 않기 때문에 사용자는 특별한 도구를 사용하지 않는 이상 쉽게 자신이 공격당하고 있다는 사실을 확인하기 힘들다.

### ARP Spoofing 발생 증상

---

(1) 피해 시스템에서의 증상

 - 네트워크 속도 저하
 - 악성코드가 웹 페이지 시작 부분에 위치
 - 정기적인 ARP 패킷 다량 수신

 (2) 공격 시스템에서의 증상

 - 네트워크 사용량 증가
 - 정기적인 ARP 패킷 발송
 - 악성 프로그램의 프로세스 동작

 <br/>

 ### 피해 탐지 방법

 (1) ARP table을 통한 MAC주소 중복 확인

 - ARP Spoofing공격이 실행될 때 서버의 ARP 패킷을 분석하면 필요 이상의 reply패킷이 있습니다. 서버는 지속적으로 G/W와 통신하기 때문에 MAC의 주소가 ARP table에서 삭제되지 않기 때문에 request가 없는 reply패킷만 수신되지 않습니다. -->


<!-- 출처: https://soldier5683.tistory.com/18 [White-hacker] -->