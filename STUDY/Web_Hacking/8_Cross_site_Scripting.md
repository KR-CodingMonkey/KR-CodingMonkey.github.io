---
sort: 8
---

# 크로스 사이트 스크립팅(XSS: Cross-Site Scripting)

<center><img src = "https://user-images.githubusercontent.com/76420201/107176952-fad33280-6a13-11eb-8af1-5e471960eb95.jpg" width = "120"></center>
<br>

XSS(Cross-site Scripting)는 웹 상에서 가장 기초적인 취약점 공격 방법의 일종으로, 악의적인 사용자가 <u>공격하려는 사이트에 스크립트를 넣는 기법</u>을 말합니다. 공격에 성공하면 사이트에 접속한 사용자는 삽입된 코드를 실행하게 되며, **보통 의도치 않은 행동을 수행시키거나 쿠키나 세션 토큰 등의 민감한 정보를 탈취**합니다. 크로스 사이트 스크립팅이란 이름 답게, 자바스크립트를 사용하여 공격하는 경우가 많습니다. 공격 방법이 단순하고 가장 기초적이지만, 많은 웹사이트들이 XSS에 대한 방어 조치를 해두지 않아 공격을 받는 경우가 많습니다. 여러 사용자가 접근 사능한 게시판 등에 코드를 삽입하는 경우도 많으며, 경우에 따라서는 메일과 같은 매체를 통해서도 전파됩니다. 주로 CSRF를 하기 위해서 사용되기 때문에 종종 CSRF와 혼동되는 경우가 있으나, XSS는 자바스크립트를 실행시키는 것이고, CSRF는 특정한 행동을 시키는 것입니다.

- 가짜 페이지를 생성하고, 사용자 입력을 유도, 정보를 탈취
- 사용자 브라우저 또는 PC에 저장된 정보를 탈취
- 해당 사용자 PC를 좀비화해서 원격에서 제어 가능

--

## XSS 종류

XSS 공격은 3가지 영역으로 구성된다. 
1. 반사 XSS(reflected XSS, 지속성 없음)
2. 저장 XSS(stored XSS, 지속성 있음)
3. 문서 객체 모델(DOM) 기반 XSS(DOM-based XSS) <br>

**반사 XSS**는 피싱 사기의 일부로 자주 사용된다. 악용하기 가장 쉽지만 방어하기도 가장 쉽다. 반사 XSS의 가장 기본적인 사례는 캄카의 예로 살펴봤다. 공격자가 악성 콘텐츠를 HTTP 요청에 주입하면 결과가 사용자에게 다시 "반사"되는 것이다.

공격자는 희생자가 그러한 링크를 클릭하도록 유도할 수 있다면 그들의 세션을 탈취할 수 있다. 그래서 반사 XSS는 피싱 공격에서 흔하게 발견된다. 예를 들면, 공격자는 취약한 웹 애플리케이션을 악용하는 악성 URL을 만든 후 피싱 등의 사회 공학 기법을 이용해 웹 애플리케이션의 정상적인 사용자가 악성 링크를 클릭하게 유도한다. 그러면 악성 코드가 웹 애플리케이션을 통해 희생자에게 반사돼 희생자의 웹 브라우저에서 실행된다.

**저장 XSS**(또는 지속) 공격은 공격자가 웹 애플리케이션으로 하여금 악성 코드를 해당 웹 애플리케이션의 데이터베이스에 저장하도록 유도할 때 발생한다. 서버에 저장된 악성 코드는 시스템 자체를 공격하기도 하고 악성코드를 웹 애플리케이션의 사용자 전체나 다수에게 전달하기도 한다. 흔한 사례는 (블로그가 한참 유행하던 때에) 블로그의 댓글에 악성 코드를 올리는 것이다. 블로그에 방문하는 사람이라면 누구나 그 악성 코드의 희생자가 된다. 지속 XSS가 가장 위험한 종류인 이유다. 모든 사용자를 공격할 수 있는데 굳이 한 사람만 공격할 이유가 없는 것이다.

**DOM 기반 XSS**는 반사 XSS나 저장 XSS와 달리 웹 애플리케이션 서버 측이 아닌 클라이언트 측 코드(자바스크립트인 경우가 많다)를 공격해 희생자의 브라우저에 악성 코드를 실행시킨다.

![xss2](https://user-images.githubusercontent.com/76420201/107179100-007f4700-6a19-11eb-9be1-f9a748a252b4.png)

---

## 반사 XSS (Reflective XSS)
 
- **반사된 XSS**란 웹 페이지 URL에 존재하는 파라미터에 악의적인 스크립트 코드를 입력하여 사용자가 URL을 클릭하면 파라미터에 입력한 악성 스크립트 코드가 실행되게 하는 공격이다. 

- 스크립트 코드가 포함된 URL을 메일로 전송하거나 게시물로 등록하여 사용자가 클릭하도록 유도한다.

---

## 저장 XSS (Stored XSS)