
# 네트워크 기초


```
무선 LAN 어댑터 Wi-Fi:

연결별 DNS 접미사. . . . :			                     ⇒   IPv6: 총 128 비트로 구성된 주소 체게 ⇒ 232개의 주소를 표현
링크-로컬 IPv6 주소 . . . . : fe80::ccb6:1421:71d3:dfd7%23
IPv4 주소 . . . . . . . . . : 192.168.0.4           ⇒   IPv4: 총 32 비트로 구성된 주소 체계
서브넷 마스크 . . . . . . . : 255.255.255.0          ⇒   0.0.0.0 ~ 255.255.255.255 ⇒ 232개의 주소를 표현
기본 게이트웨이 . . . . . . : 192.168.0.1
```

## IP(Internet Protocol) 주소
인터넷 공간에서 각 호스트의 고유한 식별자를 의미

IP 주소의 등급(클래스)

|구분 |	| IP 주소의 첫번째 자리 범위|
|-------|---|-------------------------------|
|A 클래스|	  1 ~ 126	|0000 0001 ~ 0111 1110|		
|B 클래스 |	128 ~ 191	|1000 0000 ~ 1011 1111|		
|C 클래스 |	192 ~ 223	|1100 0000 ~ 1101 1111|

8.8.8.8 → 구글에서 제공하는 DNS 서버의 IP 주소
168.126.63.1 → KT에서 제공하는 DNS 서버의 IP 주소

루프백 주소(loopback address) = 127.0.0.1 ⇒ 어떤 클래스에도 속하지 않음 ⇒ 자기가 사용하는 LAN 카드를 의미

<br/>

## 서브넷 마스크(subnet mask)

어느 한 네트워크에서 1~100까지 IP를 할당받을 수 있고 우리가 필요한 IP가 20개 정도라고 가정할 때, 굳이 1~100까지 IP를 줄 필요가 없습니다. 20 + a 만큼만 IP를 할당해 주는게 효율적입니다. 서브넷 마스크를 이용해서 필요한 IP 개 수만큼 할당해 주게 되면 자원 낭비를 줄일 수 있습니다.

- IP 주소를 네트워크 ID와 호스트 ID로 구분하는 방법

|IP		|	Subnet mask 	|	네트워크 ID	 |	호스트 ID|
|-------|-------------------|----------------|-----------|
|10.10.10.10	|	255.0.0.0	|	10		|	10.10.10|
|176.16.10.10	|	255.255.0.0	|	176.16		|	10.10|
|192.168.10.10	|	255.255.255.0	|	192.168.10	|	10|

IP/Subnetmask 가 192.168.10.10/24라고 하면 네트워크ID는 192.168.10.x 까지이고 Host ID가 나머지 부분입니다.<br/>
또한 같은 네트워크 ID에서 생성할 수 있는 IP개수는 
$$2^{32} 2^{24} = 2^{8}$$


256개가 되겠네요.

일반적으로, 맨 처음 주소(192.168.10.0)와 맨 마지막 주소(192.168.10.255)는 네트워크 주소, 브로드캐스트 주소로 사용합니다. 할당 할 수 있는 IP개수Host갯수는 256 - 2  = 254개 입니다.

네트워크 ID ⇒ 많은 LAN 영역에서 자기 LAN 영역을 구분하기 위한 식별자<br/>
호스트 ID   ⇒ 해당 LAN 영역에 속한 호스트 각각을 구분하기 위한 식별자 

<br/>

## 게이트웨이(gateway) = 라우터(router)
각기 다른 네트워크 ID를 사용하는 LAN 영역 사이를 연결해 주는 기능

게이트웨이 ⇒ SW 측면을 강조<br/>
라우터 ⇒ HW 측면을 강조

<br/>

## LAN 영역

동일한 네트워크 ID를 공유하는 장치들의 집합적 공간
동일한 게이트웨이 주소를 사용하는 장치들의 집합적 공간 


구분			PC-A		PC-B		PC-C
--------------------	-------------	-------------	-------------
IP			192.168.0.13	192.168.0.20	192.168.10.11
Subnet mask 		255.255.255.0	255.255.255.0	255.255.255.0
Default Gateway	192.168.0.1	192.168.0.1	192.168.10.1	
네트워크 ID		192.168.0	1921.68.0	192.168.10
			
동일한 네트워크 ID를 사용 = 동일 네트워크

물리적 주소 = MAC Address(Media Access Control Address)
네트워크 세그먼트의 데이터 링크 계층에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자
LAN 카드에 새겨진 주소
LAN 영역에서 내부 통신을 수행하기 위해 필요한 주소

48비트로 구성 ⇒ OUI(Organizationally Unique Identifier, 24비트) + 일련번호(24비트)



## DHCP(Dynamic Host Configuration Protocol, 동적 호스트 구성 프로토콜)

호스트 IP 구성 관리를 단순화하는 IP 표준
DHCP 서버를 사용하여 IP 주소 및 관련된 기타 구성 세부 정보(Subnet mask, Gateway IP  wnth, DNS 서버 IP 주소 등)를 네트워크의 DHCP 사용 클라이언트에게 동적으로 할당하는 방법을 제공


DNS(Domain Name System, 도메인 네임 시스템)
도메인 이름과 IP 주소의 대응 관계를 데이터베이스 형태로 저장하고 제공하는 서비스 
호스트의 도메인 이름을 호스트의 네트워크 주소로 바꾸거나 그 반대의 변환을 수행할 수 있도록 하기 위해 개발
특정 컴퓨터의 주소를 찾기 위해, 사람이 이해하기 쉬운 도메인 이름을 숫자로 된 식별 번호로 변환해 줌


## IP 주소 vs MAC 주소
구분		구성					기능
------------- -----------------------------------	-----------------------
IP 주소 	32비트	  네트워크 ID + 호스트 ID	IP 주소 기반의 라우팅
MAC 주소	48비트	  OUI + 일련번호		MAC 주소 기반의 스위칭


## ARP(Address Resolution Protocol, 주소 결정 프로토콜)
네트워크 상에서 IP 주소를 물리적 네트워크 주소로 대응시키기 위해 사용되는 프로토콜




## ping 8.8.8.8 동작 순서

Step 1. 출발지 IP와 목적지 IP의 네트워크 ID를 비교
		
|      |출발지| 	목적지|
|------|------|----------|
|IP		|223.195.224.252	|8.8.8.8|
|Subnet mask	|255.255.255.0		|255.255.255.0|
|Network ID	|223.195.224		|8.8.8|			

두 개의 네트워크 ID가 서로 다르다 -> 목적지 주소를 게이트웨이 주소로 변경

Step 2. 게이트웨이의 MAC 주소 확인을 위해서 ARP 질의(query)를 브로드캐스팅	⇐ 수신처 미정 (목적지 MAC이 미설정)
		
|       |출발지 		|	목적지|
|IP		|223.195.224.252	|223.195.224.2|
|MAC	|E8-6A-64-97-3E-66	|?|			

⇒ LAN 영역의 모든 호스트는 ARP 브로드캐스팅 질의를 수신

#3 게이트웨이가 자신의 MAC 주소를 유니캐스팅		⇐ 수신처가 정해져 있는 것 (목적지 MAC이 설정)
		출발지 			목적지
IP		223.195.224.2		223.195.224.252
MAC		00-00-0c-07-ac-1f	E8-6A-64-97-3E-66		


#4 응답을 받은 출발지 호스트는 자신의 ARP 캐시 테이블에 반영
C:\Windows\system32> arp -a

인터페이스: 223.195.224.252 --- 0x6
  인터넷 주소           물리적 주소           유형
  223.195.224.2         00-00-0c-07-ac-1f     동적
  224.0.0.2             01-00-5e-00-00-02     정적


#5 이후부터는 게이트웨이 통신하기 위해서는 로컬 ARP 캐시 테이블에 MAC 주소를 이용해서 유니캐스팅
		출발지 			목적지
IP		223.195.224.252	223.195.224.2
MAC		E8-6A-64-97-3E-66	01-00-5e-00-00-02		

